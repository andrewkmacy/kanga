!function(t){"use strict";var u=wp.customize,n={controls:{},init:function(){var i=this;i.handleDependency(),i.hideEmptySections(),u.bind("change",function(n,e){i.hasDependentControls(n.id)&&(i.handleDependency(),i.hideEmptySections())})},hasDependentControls:function(o){var c=!1;return t.each(kanga.config,function(n,e){if(_.isUndefined(e.conditions)){var i=e[0];if(o==i)return void(c=!0)}else{var a=e.conditions;t.each(a,function(n,e){var i=e[0];o!=i||(c=!0)})}}),c},handleDependency:function(){var a=this,n=u.get();a.checked_controls={},_.each(n,function(n,e){var i=u.control(e);a.checkControlVisibility(i,e)})},checkControlVisibility:function(n,e){var i=u.get();if(!_.isUndefined(n)&&void 0!==kanga.config[e]){var a=!1,o=kanga.config[e],c=_.isUndefined(o.conditions)?o:o.conditions,t=_.isUndefined(o.operator)?"AND":o.operator;void 0!==c&&(a=this.checkDependency(c,i,t),(this.checked_controls[e]=a)?n.container.removeClass("ast-hide"):n.container.addClass("ast-hide"))}},checkDependency:function(n,r,d){var f=this,l=!0,h=!1,e=n[0];if(_.isString(e)){var i,a=n[1],o=n[2];if(!_.isUndefined(kanga.config[e])){n=_.isUndefined(kanga.config[e].conditions)?kanga.config[e]:kanga.config[e].conditions;var c=_.isUndefined(kanga.config[e].operator)?"AND":kanga.config[e].operator;if(!_.isUndefined(n))if(f.checkDependency(n,r,c))u.control(e).container.removeClass("ast-hide");else if(l=!(h=!0),"AND"==d)return}_.isUndefined(r[e])||h||!l||(i=r[e],l=f.compareValues(i,a,o))}else _.isArray(e)&&(t.each(n,function(n,e){var i=e[0],a=e[1],o=e[2],c=_.isUndefined(r[i])?"":r[i];if(void 0!==kanga.config[i]){var t=_.isUndefined(kanga.config[i].conditions)?kanga.config[i]:kanga.config[i].conditions,s=_.isUndefined(kanga.config[i].operator)?"AND":kanga.config[i].operator;if(!_.isUndefined(t))if(f.checkDependency(t,r,s))l=!0,u.control(i).container.removeClass("ast-hide");else if(l=!1,"AND"==d)return}else l=!0;if(l)if("AND"==d){if(!f.compareValues(c,a,o))return l=!1}else l=!!f.compareValues(c,a,o)&&(h=!0)}),h&&"OR"==d&&(l=!0));return l},hideEmptySections:function(){t("ul.accordion-section.control-section-ast_section").each(function(){var n=t(this).attr("id"),e=!1,i=t(this).find(" > .customize-control");0<i.length&&(i.each(function(){t(this).hasClass("ast-hide")||"none"==t(this).css("display")||(e=!0)}),e?t('.control-section[aria-owns="'+n+'"]').removeClass("ast-hide"):t('.control-section[aria-owns="'+n+'"]').addClass("ast-hide"))})},compareValues:function(n,e,i){var a=!1;switch(e){case"===":a=n===i;break;case">":a=i<n;break;case"<":a=n<i;break;case"<=":a=n<=i;break;case">=":a=i<=n;break;case"!=":a=n!=i;break;case"empty":var o=_.clone(n);a=_.isObject(o)||_.isArray(o)?(_.each(o,function(n,e){_.isEmpty(n)&&delete o[e]}),!!_.isEmpty(o)):!(!_.isNull(o)&&""!=o);break;case"not_empty":o=_.clone(n);(_.isObject(o)||_.isArray(o))&&_.each(o,function(n,e){_.isEmpty(n)&&delete o[e]}),a=!_.isEmpty(o);break;case"contains":_.isArray(n)&&-1!==t.inArray(i,n)&&(a=!0);break;default:a=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(n)&&_.contains(i,n):n==i}return a}};t(function(){n.init()})}(jQuery);